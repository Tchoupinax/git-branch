name: Release

on:
  push:
    tags:
      - "*"

jobs:
  release:
    name: Release project ðŸš€
    runs-on: ubuntu-latest
    steps:
      - name: Release project ðŸš€
        uses: tchoupinax/repo-config/shared-actions/steps/golang/goreleaser-release@v0.1.0
        with:
          appId: ${{ secrets.DEPLOY_APP_ID }}
          privateKey: ${{ secrets.DEPLOY_APP_KEY }}

  brew-update:
    name: Update Brew registry ðŸ‘Š
    runs-on: ubuntu-latest
    needs: [release]
    steps:
      - name: Update Brew registry ðŸ‘Š
        uses: tchoupinax/repo-config/shared-actions/dx/update-brew-registry@b6112ca3fb39559ee7408dde1e22a0c5f94e0fbe
        with:
          patToken: ${{ secrets.BREW_COMITTER_PAT }}
          formulaPath: gb.rb
